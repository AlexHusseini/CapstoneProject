{% extends "base.html" %}
{% block content %}
<h2>Rubric: {{ rubric.name }}</h2>

<h3>Add Item</h3>
<form method="post">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
  <label>Criterion <input type="text" name="criterion" required placeholder="e.g., Quality of Work"></label>
  <div style="margin: 4px 0 10px 0;">
    <small>Define what this criterion means so evaluators share the same understanding.</small>
  </div>
  <label>Description <input type="text" name="description" placeholder="Describe what 0, 3, and 5 mean (anchors)"></label>
  <div style="margin: 4px 0 10px 0;">
    <small>Be explicit about the 0–5 scale. For example: 0 – failed to meet expectations; 3 – meets most expectations; 5 – consistently exceeds expectations.</small>
  </div>
  <label>Weight <input type="number" name="weight" step="0.1" value="1" required></label>
  <label>Max Score <input type="number" name="max_score" value="5" min="1" required></label>
  <div style="margin-top: 15px;">
    <button type="submit">Add</button>
  </div>
</form>

<h3>Items</h3>
<table class="table">
  <tr><th>Criterion</th><th>Description</th><th>Weight</th><th>Max</th><th></th></tr>
  {% for it in rubric.items %}
  <tr>
    <td>{{ it.criterion }}</td>
    <td>{{ it.description or "" }}</td>
    <td>{{ it.weight }}</td>
    <td>{{ it.max_score }}</td>
    <td>
      <form method="post" action="{{ url_for('delete_rubric_item', rubric_id=rubric.id, item_id=it.id) }}">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <button class="btn danger" type="submit">Delete</button>
      </form>
    </td>
  </tr>
  {% endfor %}
</table>

<div style="margin-top: 15px;">
  <form method="get" action="{{ url_for('rubrics') }}">
    <button type="submit" class="btn">Finish</button>
  </form>
</div>
{% endblock %}